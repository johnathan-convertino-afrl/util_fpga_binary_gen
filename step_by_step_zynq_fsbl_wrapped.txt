### BUILD UBOOT ###

git pull uboot

select branch

set arch

set compiler

set config

build

### VIVADO COMMANDS ###

vivado -mode tcl -nolog

open_project AFRL_project_fmcomms2-3_1.0.0.xpr

write_hw_platform -fixed -include_bit -force -file [get_property DIRECTORY [get_projects]]/gen_bootfs/system_wrapper.xsa

open_run impl_1

write_bitstream [get_property DIRECTORY [get_projects]]/gen_bootfs/system_bitstream.bit

close_design

exit

### XSCT COMMANDS ###

xsct

platform create -name {fmcomms2_zed} -hw {system_wrapper.xsa} -proc {ps7_cortexa9_0} -os {standalone} -out {/home/convertinoj/Documents/vitis_workspace}
platform write

platform read {/home/convertinoj/Documents/vitis_workspace/fmcomms2_zed/platform.spr}

platform active {fmcomms2_zed}

domain create -name {fsbl_domain} -os {standalone} -proc {ps7_cortexa9_0} -runtime {cpp} -arch {32-bit} -support-app {zynq_fsbl}

platform write

domain active {zynq_fsbl}

domain active {fsbl_domain}

platform generate -quick

app create -name zynq_fsbl -template {Zynq FSBL} -platform fmcomms2_zed -domain fsbl_domain -sysproj fmcomms2_zed

make all

bootgen -image output.bif -arch zynq -o /home/convertinoj/Documents/vitis_workspace/BOOT.bin

### OUTPUT.BIF ####
//arch = zynq; split = false; format = BIN
the_ROM_image:
{
	[bootloader]/home/convertinoj/Documents/vitis_workspace/zynq_fsbl/Debug/zynq_fsbl.elf
	/home/convertinoj/Documents/programming/u-boot-exe/zybo/u-boot.elf
}
