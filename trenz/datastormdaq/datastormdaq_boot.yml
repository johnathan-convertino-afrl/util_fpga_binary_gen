find_and_move_sof:
  tool: find_and_move
  src_file: "output_files/*.sof"
  dest_file: output_files/quartus_bit.sof
run_gen:
  tool: builder
  run_gen:
    sequential:
      quartus_cpf_c5:
        sof_file: output_files/quartus_bit.sof
        rbf_name: output_files/quartus_bit.rbf
      copy_rbf:
        tool: copy
        src_dir: output_files/quartus_bit.rbf
        dest_dir: BOOTFS/quartus_bit.rbf
      mkimage:
        arch: ARM
        src_file: BOOTFS/BOOT.cmd
        dest_file: BOOTFS/BOOT.scr
git_uboot:
  tool: git_pull
  repo_url: https://github.com/johnathan-convertino-afrl/u-boot-socfpga.git
  repo_dir: git/intel_uboot
  tag: socfpga_v2023.10
run_filter_script:
  tool: builder
  run_gen:
    sequential:
      py_script:
        file: "{_pwd}/git/intel_uboot/arch/arm/mach-socfpga/cv_bsp_generator/cv_bsp_generator.py"
        args: "-i {_pwd}/hps_isw_handoff/system_ps_wrapper_sys_hps/ {_pwd}/git/u-boot-socfpga/board/altera/cyclone5-socdk/qts/"
untar_gcc:
  tool: untar
  src_file: TOOLS/gcc-arm-10.3-2021.07-x86_64-arm-none-linux-gnueabihf.tar.xz
  dest_dir: TOOLS/
find_and_move_dir:
  tool: find_and_move
  src_file: TOOLS/gcc-arm-10.3-2021.07-x86_64-arm-none-linux-gnueabihf
  dest_file: TOOLS/gcc
run_uboot_gen:
  tool: builder
  run_uboot_gen:
    sequential:
      make:
        src_dir: git/intel_uboot
        args: "CROSS_COMPILE={_pwd}/TOOLS/gcc/bin/arm-none-linux-gnueabihf- ARCH=arm socfpga_cyclone5_defconfig"
run_uboot_build:
  tool: builder
  run_uboot_build:
    sequential:
      make:
        src_dir: git/intel_uboot
        args: "CROSS_COMPILE={_pwd}/TOOLS/gcc/bin/arm-none-linux-gnueabihf- ARCH=arm"
copy_uboot:
  tool: copy
  src_dir: git/intel_uboot/u-boot.img
  dest_dir: BOOTFS/u-boot.img
copy_uboot_spl:
  tool: copy
  src_dir: git/intel_uboot/spl/u-boot-splx4.sfp
  dest_dir: BOOTFS/u-boot-splx4.sfp
